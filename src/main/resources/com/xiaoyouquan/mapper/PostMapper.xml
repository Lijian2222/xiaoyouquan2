<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTO Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.xiaoyouquan.mapper.PostMapper">

    <!--条件查询帖子信息-->
    <!--id:方法名  resultType:单条记录所封装的类型-->
    <select id="listPosts" resultType="com.xiaoyouquan.pojo.dto.PostDTO">
        select *,u.nickname from post p join user u on p.user_id=u.id
        <where>
            <if test=" id!=null ">id = #{id}</if>
            <if test=" content!=null and content!='' ">and content = #{content}</if>
            <if test=" userId!=null ">and user_id = #{userId}</if>
            <if test=" publishTime!=null and publishTime!='' ">and publishTime = #{publishTime}</if>
            <if test=" goodNums!=null ">and good_nums = #{goodNums}</if>
            <if test=" viewNums!=null ">and view_nums = #{viewNums}</if>
            <if test=" isDeleted!=null ">and is_deleted = #{isDeleted}</if>
        </where>
        order by p.id desc
    </select>


    <insert id="insertPost" parameterType="com.xiaoyouquan.pojo.Post">
        INSERT INTO post (id,content,user_id,publish_time,good_nums,view_nums,comment_nums)
        VALUES (#{id}, #{content},#{userId},#{publishTime},#{goodNums},#{viewNums},#{commentNums})
    </insert>




</mapper>